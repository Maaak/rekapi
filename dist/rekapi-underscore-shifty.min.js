/*! Rekapi - v0.16.4 - 2014-01-15 - http://rekapi.com */
(function(){var t=this,e=t._,n={},r=Array.prototype,i=Object.prototype,a=Function.prototype,o=r.push,s=r.slice,u=r.concat,c=i.toString,p=i.hasOwnProperty,h=r.forEach,l=r.map,f=r.reduce,d=r.reduceRight,m=r.filter,y=r.every,v=r.some,_=r.indexOf,g=r.lastIndexOf,k=Array.isArray,T=Object.keys,w=a.bind,P=function(t){return t instanceof P?t:this instanceof P?(this._wrapped=t,void 0):new P(t)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=P),exports._=P):t._=P,P.VERSION="1.5.1";var x=P.each=P.forEach=function(t,e,r){if(null!=t)if(h&&t.forEach===h)t.forEach(e,r);else if(t.length===+t.length){for(var i=0,a=t.length;a>i;i++)if(e.call(r,t[i],i,t)===n)return}else for(var o in t)if(P.has(t,o)&&e.call(r,t[o],o,t)===n)return};P.map=P.collect=function(t,e,n){var r=[];return null==t?r:l&&t.map===l?t.map(e,n):(x(t,function(t,i,a){r.push(e.call(n,t,i,a))}),r)};var A="Reduce of empty array with no initial value";P.reduce=P.foldl=P.inject=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),f&&t.reduce===f)return r&&(e=P.bind(e,r)),i?t.reduce(e,n):t.reduce(e);if(x(t,function(t,a,o){i?n=e.call(r,n,t,a,o):(n=t,i=!0)}),!i)throw new TypeError(A);return n},P.reduceRight=P.foldr=function(t,e,n,r){var i=arguments.length>2;if(null==t&&(t=[]),d&&t.reduceRight===d)return r&&(e=P.bind(e,r)),i?t.reduceRight(e,n):t.reduceRight(e);var a=t.length;if(a!==+a){var o=P.keys(t);a=o.length}if(x(t,function(s,u,c){u=o?o[--a]:--a,i?n=e.call(r,n,t[u],u,c):(n=t[u],i=!0)}),!i)throw new TypeError(A);return n},P.find=P.detect=function(t,e,n){var r;return S(t,function(t,i,a){return e.call(n,t,i,a)?(r=t,!0):void 0}),r},P.filter=P.select=function(t,e,n){var r=[];return null==t?r:m&&t.filter===m?t.filter(e,n):(x(t,function(t,i,a){e.call(n,t,i,a)&&r.push(t)}),r)},P.reject=function(t,e,n){return P.filter(t,function(t,r,i){return!e.call(n,t,r,i)},n)},P.every=P.all=function(t,e,r){e||(e=P.identity);var i=!0;return null==t?i:y&&t.every===y?t.every(e,r):(x(t,function(t,a,o){return(i=i&&e.call(r,t,a,o))?void 0:n}),!!i)};var S=P.some=P.any=function(t,e,r){e||(e=P.identity);var i=!1;return null==t?i:v&&t.some===v?t.some(e,r):(x(t,function(t,a,o){return i||(i=e.call(r,t,a,o))?n:void 0}),!!i)};P.contains=P.include=function(t,e){return null==t?!1:_&&t.indexOf===_?-1!=t.indexOf(e):S(t,function(t){return t===e})},P.invoke=function(t,e){var n=s.call(arguments,2),r=P.isFunction(e);return P.map(t,function(t){return(r?e:t[e]).apply(t,n)})},P.pluck=function(t,e){return P.map(t,function(t){return t[e]})},P.where=function(t,e,n){return P.isEmpty(e)?n?void 0:[]:P[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},P.findWhere=function(t,e){return P.where(t,e,!0)},P.max=function(t,e,n){if(!e&&P.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.max.apply(Math,t);if(!e&&P.isEmpty(t))return-1/0;var r={computed:-1/0,value:-1/0};return x(t,function(t,i,a){var o=e?e.call(n,t,i,a):t;o>r.computed&&(r={value:t,computed:o})}),r.value},P.min=function(t,e,n){if(!e&&P.isArray(t)&&t[0]===+t[0]&&65535>t.length)return Math.min.apply(Math,t);if(!e&&P.isEmpty(t))return 1/0;var r={computed:1/0,value:1/0};return x(t,function(t,i,a){var o=e?e.call(n,t,i,a):t;r.computed>o&&(r={value:t,computed:o})}),r.value},P.shuffle=function(t){var e,n=0,r=[];return x(t,function(t){e=P.random(n++),r[n-1]=r[e],r[e]=t}),r};var b=function(t){return P.isFunction(t)?t:function(e){return e[t]}};P.sortBy=function(t,e,n){var r=b(e);return P.pluck(P.map(t,function(t,e,i){return{value:t,index:e,criteria:r.call(n,t,e,i)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(r>n||void 0===r)return-1}return t.index<e.index?-1:1}),"value")};var I=function(t,e,n,r){var i={},a=b(null==e?P.identity:e);return x(t,function(e,o){var s=a.call(n,e,o,t);r(i,s,e)}),i};P.groupBy=function(t,e,n){return I(t,e,n,function(t,e,n){(P.has(t,e)?t[e]:t[e]=[]).push(n)})},P.countBy=function(t,e,n){return I(t,e,n,function(t,e){P.has(t,e)||(t[e]=0),t[e]++})},P.sortedIndex=function(t,e,n,r){n=null==n?P.identity:b(n);for(var i=n.call(r,e),a=0,o=t.length;o>a;){var s=a+o>>>1;i>n.call(r,t[s])?a=s+1:o=s}return a},P.toArray=function(t){return t?P.isArray(t)?s.call(t):t.length===+t.length?P.map(t,P.identity):P.values(t):[]},P.size=function(t){return null==t?0:t.length===+t.length?t.length:P.keys(t).length},P.first=P.head=P.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:s.call(t,0,e)},P.initial=function(t,e,n){return s.call(t,0,t.length-(null==e||n?1:e))},P.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:s.call(t,Math.max(t.length-e,0))},P.rest=P.tail=P.drop=function(t,e,n){return s.call(t,null==e||n?1:e)},P.compact=function(t){return P.filter(t,P.identity)};var O=function(t,e,n){return e&&P.every(t,P.isArray)?u.apply(n,t):(x(t,function(t){P.isArray(t)||P.isArguments(t)?e?o.apply(n,t):O(t,e,n):n.push(t)}),n)};P.flatten=function(t,e){return O(t,e,[])},P.without=function(t){return P.difference(t,s.call(arguments,1))},P.uniq=P.unique=function(t,e,n,r){P.isFunction(e)&&(r=n,n=e,e=!1);var i=n?P.map(t,n,r):t,a=[],o=[];return x(i,function(n,r){(e?r&&o[o.length-1]===n:P.contains(o,n))||(o.push(n),a.push(t[r]))}),a},P.union=function(){return P.uniq(P.flatten(arguments,!0))},P.intersection=function(t){var e=s.call(arguments,1);return P.filter(P.uniq(t),function(t){return P.every(e,function(e){return P.indexOf(e,t)>=0})})},P.difference=function(t){var e=u.apply(r,s.call(arguments,1));return P.filter(t,function(t){return!P.contains(e,t)})},P.zip=function(){for(var t=P.max(P.pluck(arguments,"length").concat(0)),e=Array(t),n=0;t>n;n++)e[n]=P.pluck(arguments,""+n);return e},P.object=function(t,e){if(null==t)return{};for(var n={},r=0,i=t.length;i>r;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},P.indexOf=function(t,e,n){if(null==t)return-1;var r=0,i=t.length;if(n){if("number"!=typeof n)return r=P.sortedIndex(t,e),t[r]===e?r:-1;r=0>n?Math.max(0,i+n):n}if(_&&t.indexOf===_)return t.indexOf(e,n);for(;i>r;r++)if(t[r]===e)return r;return-1},P.lastIndexOf=function(t,e,n){if(null==t)return-1;var r=null!=n;if(g&&t.lastIndexOf===g)return r?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var i=r?n:t.length;i--;)if(t[i]===e)return i;return-1},P.range=function(t,e,n){1>=arguments.length&&(e=t||0,t=0),n=arguments[2]||1;for(var r=Math.max(Math.ceil((e-t)/n),0),i=0,a=Array(r);r>i;)a[i++]=t,t+=n;return a};var C=function(){};P.bind=function(t,e){var n,r;if(w&&t.bind===w)return w.apply(t,s.call(arguments,1));if(!P.isFunction(t))throw new TypeError;return n=s.call(arguments,2),r=function(){if(!(this instanceof r))return t.apply(e,n.concat(s.call(arguments)));C.prototype=t.prototype;var i=new C;C.prototype=null;var a=t.apply(i,n.concat(s.call(arguments)));return Object(a)===a?a:i}},P.partial=function(t){var e=s.call(arguments,1);return function(){return t.apply(this,e.concat(s.call(arguments)))}},P.bindAll=function(t){var e=s.call(arguments,1);if(0===e.length)throw Error("bindAll must be passed function names");return x(e,function(e){t[e]=P.bind(t[e],t)}),t},P.memoize=function(t,e){var n={};return e||(e=P.identity),function(){var r=e.apply(this,arguments);return P.has(n,r)?n[r]:n[r]=t.apply(this,arguments)}},P.delay=function(t,e){var n=s.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},P.defer=function(t){return P.delay.apply(P,[t,1].concat(s.call(arguments,1)))},P.throttle=function(t,e,n){var r,i,a,o=null,s=0;n||(n={});var u=function(){s=n.leading===!1?0:new Date,o=null,a=t.apply(r,i)};return function(){var c=new Date;s||n.leading!==!1||(s=c);var p=e-(c-s);return r=this,i=arguments,0>=p?(clearTimeout(o),o=null,s=c,a=t.apply(r,i)):o||n.trailing===!1||(o=setTimeout(u,p)),a}},P.debounce=function(t,e,n){var r,i=null;return function(){var a=this,o=arguments,s=function(){i=null,n||(r=t.apply(a,o))},u=n&&!i;return clearTimeout(i),i=setTimeout(s,e),u&&(r=t.apply(a,o)),r}},P.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},P.wrap=function(t,e){return function(){var n=[t];return o.apply(n,arguments),e.apply(this,n)}},P.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},P.after=function(t,e){return function(){return 1>--t?e.apply(this,arguments):void 0}},P.keys=T||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)P.has(t,n)&&e.push(n);return e},P.values=function(t){var e=[];for(var n in t)P.has(t,n)&&e.push(t[n]);return e},P.pairs=function(t){var e=[];for(var n in t)P.has(t,n)&&e.push([n,t[n]]);return e},P.invert=function(t){var e={};for(var n in t)P.has(t,n)&&(e[t[n]]=n);return e},P.functions=P.methods=function(t){var e=[];for(var n in t)P.isFunction(t[n])&&e.push(n);return e.sort()},P.extend=function(t){return x(s.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},P.pick=function(t){var e={},n=u.apply(r,s.call(arguments,1));return x(n,function(n){n in t&&(e[n]=t[n])}),e},P.omit=function(t){var e={},n=u.apply(r,s.call(arguments,1));for(var i in t)P.contains(n,i)||(e[i]=t[i]);return e},P.defaults=function(t){return x(s.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},P.clone=function(t){return P.isObject(t)?P.isArray(t)?t.slice():P.extend({},t):t},P.tap=function(t,e){return e(t),t};var E=function(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof P&&(t=t._wrapped),e instanceof P&&(e=e._wrapped);var i=c.call(t);if(i!=c.call(e))return!1;switch(i){case"[object String]":return t==e+"";case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var a=n.length;a--;)if(n[a]==t)return r[a]==e;var o=t.constructor,s=e.constructor;if(o!==s&&!(P.isFunction(o)&&o instanceof o&&P.isFunction(s)&&s instanceof s))return!1;n.push(t),r.push(e);var u=0,p=!0;if("[object Array]"==i){if(u=t.length,p=u==e.length)for(;u--&&(p=E(t[u],e[u],n,r)););}else{for(var h in t)if(P.has(t,h)&&(u++,!(p=P.has(e,h)&&E(t[h],e[h],n,r))))break;if(p){for(h in e)if(P.has(e,h)&&!u--)break;p=!u}}return n.pop(),r.pop(),p};P.isEqual=function(t,e){return E(t,e,[],[])},P.isEmpty=function(t){if(null==t)return!0;if(P.isArray(t)||P.isString(t))return 0===t.length;for(var e in t)if(P.has(t,e))return!1;return!0},P.isElement=function(t){return!(!t||1!==t.nodeType)},P.isArray=k||function(t){return"[object Array]"==c.call(t)},P.isObject=function(t){return t===Object(t)},x(["Arguments","Function","String","Number","Date","RegExp"],function(t){P["is"+t]=function(e){return c.call(e)=="[object "+t+"]"}}),P.isArguments(arguments)||(P.isArguments=function(t){return!(!t||!P.has(t,"callee"))}),P.isFunction=function(t){return"function"==typeof t},P.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},P.isNaN=function(t){return P.isNumber(t)&&t!=+t},P.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==c.call(t)},P.isNull=function(t){return null===t},P.isUndefined=function(t){return void 0===t},P.has=function(t,e){return p.call(t,e)},P.noConflict=function(){return t._=e,this},P.identity=function(t){return t},P.times=function(t,e,n){for(var r=Array(Math.max(0,t)),i=0;t>i;i++)r[i]=e.call(n,i);return r},P.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var M={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};M.unescape=P.invert(M.escape);var R={escape:RegExp("["+P.keys(M.escape).join("")+"]","g"),unescape:RegExp("("+P.keys(M.unescape).join("|")+")","g")};P.each(["escape","unescape"],function(t){P[t]=function(e){return null==e?"":(""+e).replace(R[t],function(e){return M[t][e]})}}),P.result=function(t,e){if(null==t)return void 0;var n=t[e];return P.isFunction(n)?n.call(t):n},P.mixin=function(t){x(P.functions(t),function(e){var n=P[e]=t[e];P.prototype[e]=function(){var t=[this._wrapped];return o.apply(t,arguments),L.call(this,n.apply(P,t))}})};var F=0;P.uniqueId=function(t){var e=++F+"";return t?t+e:e},P.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var j=/(.)^/,D={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},N=/\\|'|\r|\n|\t|\u2028|\u2029/g;P.template=function(t,e,n){var r;n=P.defaults({},n,P.templateSettings);var i=RegExp([(n.escape||j).source,(n.interpolate||j).source,(n.evaluate||j).source].join("|")+"|$","g"),a=0,o="__p+='";t.replace(i,function(e,n,r,i,s){return o+=t.slice(a,s).replace(N,function(t){return"\\"+D[t]}),n&&(o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),r&&(o+="'+\n((__t=("+r+"))==null?'':__t)+\n'"),i&&(o+="';\n"+i+"\n__p+='"),a=s+e.length,e}),o+="';\n",n.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{r=Function(n.variable||"obj","_",o)}catch(s){throw s.source=o,s}if(e)return r(e,P);var u=function(t){return r.call(this,t,P)};return u.source="function("+(n.variable||"obj")+"){\n"+o+"}",u},P.chain=function(t){return P(t).chain()};var L=function(t){return this._chain?P(t).chain():t};P.mixin(P),x(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=r[t];P.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],L.call(this,n)}}),x(["concat","join","slice"],function(t){var e=r[t];P.prototype[t]=function(){return L.call(this,e.apply(this._wrapped,arguments))}}),P.extend(P.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this),function(t){var e=function(){"use strict";function e(){}function n(t,e){var n;for(n in t)Object.hasOwnProperty.call(t,n)&&e(n)}function r(t,e){return n(e,function(n){t[n]=e[n]}),t}function i(t,e){return n(e,function(n){void 0===t[n]&&(t[n]=e[n])}),t}function a(t,e,n,r,i,a,s){var u,c=(t-a)/i;for(u in e)e.hasOwnProperty(u)&&(e[u]=o(n[u],r[u],T[s[u]],c));return e}function o(t,e,n,r){return t+(e-t)*n(r)}function s(t,e,r){var i=p.prototype.filter;n(i,function(n){i[n][e]&&i[n][e].apply(t,r)})}function u(t,e,n,r,i,o,u,c){h=e+n,l=Math.min(_(),h),f=l>=h,t.isPlaying()&&!f?(g(t._timeoutHandler,y),k.length=0,k.push(r),k.push(i),k.push(o),k.push(u),s(t,"beforeTween",k),a(l,r,i,o,n,e,u),s(t,"afterTween",k),c(r)):f&&(c(o),t.stop(!0))}function c(t,e){var r={};return"string"==typeof e?n(t,function(t){r[t]=e}):n(t,function(t){r[t]||(r[t]=e[t]||d)}),r}function p(t){var e=t||{};return this.data={},this._currentState=e.initialState||{},this._timeoutHandler=null,this}var h,l,f,d="linear",m=500,y=1e3/60,v=Date.now?Date.now:function(){return+new Date},_=v,g=function(){var t;return t="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame||setTimeout:setTimeout}(),k=[];p.prototype.tween=function(t){if(!this._isTweening){this._pausedAtTime=null,this._step=t.step||e,this._callback=t.callback||e,this._targetState=t.to||{},this._duration=t.duration||m,this._currentState=t.from||this.get(),this._timestamp=_();var n=this._currentState,a=this._targetState;i(n,a),i(a,n),this._easing=c(n,t.easing||d);var o=this._originalState=r({},n);return s(this,"tweenCreated",[n,o,a,this._easing]),this.resume()}},p.prototype.get=function(){return r({},this._currentState)},p.prototype.set=function(t){this._currentState=t},p.prototype.stop=function(t){return this._isTweening=!1,this._isPaused=!1,this._timeoutHandler=null,t&&(r(this._currentState,this._targetState),s(this,"afterTweenEnd",[this._currentState,this._originalState,this._targetState,this._easing]),this._callback.call(this._currentState,this._currentState)),this},p.prototype.pause=function(){return this._pausedAtTime=_(),this._isPaused=!0,this},p.prototype.resume=function(){this._isPaused&&(this._timestamp+=_()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0;var t=this;return this._timeoutHandler=function(){u(t,t._timestamp,t._duration,t._currentState,t._originalState,t._targetState,t._easing,t._step)},this._timeoutHandler(),this},p.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused},p.prototype.filter={},r(p,{now:_,each:n,tweenProps:a,tweenProp:o,applyFilter:s,shallowCopy:r,defaults:i,composeEasingObject:c}),p.prototype.formula={linear:function(t){return t}};var T=p.prototype.formula;return"object"==typeof exports?module.exports=p:"function"==typeof define&&define.amd?define(function(){return p}):void 0===t.Tweenable&&(t.Tweenable=p),p}();(function(){e.shallowCopy(e.prototype.formula,{easeInQuad:function(t){return Math.pow(t,2)},easeOutQuad:function(t){return-(Math.pow(t-1,2)-1)},easeInOutQuad:function(t){return 1>(t/=.5)?.5*Math.pow(t,2):-.5*((t-=2)*t-2)},easeInCubic:function(t){return Math.pow(t,3)},easeOutCubic:function(t){return Math.pow(t-1,3)+1},easeInOutCubic:function(t){return 1>(t/=.5)?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2)},easeInQuart:function(t){return Math.pow(t,4)},easeOutQuart:function(t){return-(Math.pow(t-1,4)-1)},easeInOutQuart:function(t){return 1>(t/=.5)?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeInQuint:function(t){return Math.pow(t,5)},easeOutQuint:function(t){return Math.pow(t-1,5)+1},easeInOutQuint:function(t){return 1>(t/=.5)?.5*Math.pow(t,5):.5*(Math.pow(t-2,5)+2)},easeInSine:function(t){return-Math.cos(t*(Math.PI/2))+1},easeOutSine:function(t){return Math.sin(t*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t)-1)},easeInExpo:function(t){return 0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:function(t){return 1===t?1:-Math.pow(2,-10*t)+1},easeInOutExpo:function(t){return 0===t?0:1===t?1:1>(t/=.5)?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return-(Math.sqrt(1-t*t)-1)},easeOutCirc:function(t){return Math.sqrt(1-Math.pow(t-1,2))},easeInOutCirc:function(t){return 1>(t/=.5)?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeOutBounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInBack:function(t){var e=1.70158;return t*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack:function(t){var e=1.70158;return 1>(t/=.5)?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},elastic:function(t){return-1*Math.pow(4,-8*t)*Math.sin(2*(6*t-1)*Math.PI/2)+1},swingFromTo:function(t){var e=1.70158;return 1>(t/=.5)?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},swingFrom:function(t){var e=1.70158;return t*t*((e+1)*t-e)},swingTo:function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},bounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bouncePast:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?2-(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?2-(7.5625*(t-=2.25/2.75)*t+.9375):2-(7.5625*(t-=2.625/2.75)*t+.984375)},easeFromTo:function(t){return 1>(t/=.5)?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2)},easeFrom:function(t){return Math.pow(t,4)},easeTo:function(t){return Math.pow(t,.25)}})})(),function(){function t(t,n,r,i,a){return e.tweenProps(i,n,t,r,1,0,a)}var n=[];e.interpolate=function(r,i,a,o){var s=new e,u=e.shallowCopy({},r),c=e.composeEasingObject(r,o||"linear");return n[0]=u,n[1]=r,n[2]=i,n[3]=c,e.applyFilter(s,"tweenCreated",n),e.applyFilter(s,"beforeTween",n),n[0]=t(r,u,i,a,c),e.applyFilter(s,"afterTween",n),n[0]}}(),function(t){function e(t,e){S.length=0;var n,r=t.length;for(n=0;r>n;n++)S.push("_"+e+"_"+n);return S}function n(t){var e=t.match(k);return 1===e.length&&e.unshift(""),e.join(A)}function r(e){t.each(e,function(t){var n=e[t];"string"==typeof n&&n.match(x)&&(e[t]=i(n))})}function i(t){return u(x,t,a)}function a(t){var e=o(t);return"rgb("+e[0]+","+e[1]+","+e[2]+")"}function o(t){return t=t.replace(/#/,""),3===t.length&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),b[0]=s(t.substr(0,2)),b[1]=s(t.substr(2,2)),b[2]=s(t.substr(4,2)),b}function s(t){return parseInt(t,16)}function u(t,e,n){var r=e.match(t),i=e.replace(t,A);if(r)for(var a,o=r.length,s=0;o>s;s++)a=r.shift(),i=i.replace(A,n(a));return i}function c(t){return u(w,t,p)}function p(t){for(var e=t.match(T),n=e.length,r=t.match(P)[0],i=0;n>i;i++)r+=parseInt(e[i],10)+",";return r=r.slice(0,-1)+")"}function h(r){var i={};return t.each(r,function(t){var a=r[t];if("string"==typeof a){var o=v(a);i[t]={formatString:n(a),chunkNames:e(o,t)}}}),i}function l(e,n){t.each(n,function(t){for(var r=e[t],i=v(r),a=i.length,o=0;a>o;o++)e[n[t].chunkNames[o]]=+i[o];delete e[t]})}function f(e,n){t.each(n,function(t){var r=e[t],i=d(e,n[t].chunkNames),a=m(i,n[t].chunkNames);r=y(n[t].formatString,a),e[t]=c(r)})}function d(t,e){for(var n,r={},i=e.length,a=0;i>a;a++)n=e[a],r[n]=t[n],delete t[n];return r}function m(t,e){I.length=0;for(var n=e.length,r=0;n>r;r++)I.push(t[e[r]]);return I}function y(t,e){for(var n=t,r=e.length,i=0;r>i;i++)n=n.replace(A,+e[i].toFixed(4));return n}function v(t){return t.match(T)}function _(e,n){t.each(n,function(t){for(var r=n[t],i=r.chunkNames,a=i.length,o=e[t].split(" "),s=o[o.length-1],u=0;a>u;u++)e[i[u]]=o[u]||s;delete e[t]})}function g(e,n){t.each(n,function(t){for(var r=n[t],i=r.chunkNames,a=i.length,o="",s=0;a>s;s++)o+=" "+e[i[s]],delete e[i[s]];e[t]=o.substr(1)})}var k=/([^\-0-9\.]+)/g,T=/[0-9.\-]+/g,w=RegExp("rgb\\("+T.source+/,\s*/.source+T.source+/,\s*/.source+T.source+"\\)","g"),P=/^.*\(/,x=/#([0-9]|[a-f]){3,6}/g,A="VAL",S=[],b=[],I=[];t.prototype.filter.token={tweenCreated:function(t,e,n){r(t),r(e),r(n),this._tokenData=h(t)},beforeTween:function(t,e,n,r){_(r,this._tokenData),l(t,this._tokenData),l(e,this._tokenData),l(n,this._tokenData)},afterTween:function(t,e,n,r){f(t,this._tokenData),f(e,this._tokenData),f(n,this._tokenData),g(r,this._tokenData)}}}(e)}(this),function(t){function e(t,e,n,r){n.each(t._events[e],function(e){e(t,r)})}function n(t,e){var n=[];e.each(t._actors,function(t){n.push(t.getEnd())}),t._animationLength=Math.max.apply(Math,n)}function r(){}var i=[],a=function(r,i,a){"use strict";function o(t,e){var n=Math.floor(e/t._animationLength);return n}function s(t){return g()-t._loopTimestamp}function u(t,e){return e>=t._timesToIterate&&-1!==t._timesToIterate}function c(t,n){u(t,n)&&(t.stop(),e(t,"animationComplete",i))}function p(t,e,n){var r;return r=u(t,n)?t._animationLength:e%t._animationLength}function h(t,e){var n=o(t,e),r=p(t,e,n);t.update(r),c(t,n)}function l(t){h(t,s(t))}function f(e){e._loopId=e._scheduleUpdate.call?e._scheduleUpdate.call(t,e._updateFn,_):setTimeout(e._updateFn,_)}function d(){return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||t.mozCancelRequestAnimationFrame&&t.mozRequestAnimationFrame||t.setTimeout}function m(){return t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.oCancelAnimationFrame||t.msCancelAnimationFrame||t.mozCancelRequestAnimationFrame||t.clearTimeout}function y(e){e._cancelUpdate.call?e._cancelUpdate.call(t,e._loopId):clearTimeout(e._loopId)}function v(t){return this.context=t||{},this._actors={},this._playState=k.STOPPED,this._events={animationComplete:[],playStateChange:[],play:[],pause:[],stop:[],beforeUpdate:[],afterUpdate:[],addActor:[],removeActor:[]},this._timesToIterate=-1,this._animationLength=0,this._loopId=null,this._loopTimestamp=null,this._pausedAtTime=null,this._lastUpdatedMillisecond=0,this._scheduleUpdate=d(),this._cancelUpdate=m(),this._updateFn=i.bind(function(){f(this),l(this)},this),i.each(v._rendererInitHook,function(t){t(this)},this),this}var _=1e3/60,g=a.now,k={STOPPED:"stopped",PAUSED:"paused",PLAYING:"playing"};v.Tweenable=a,v._=i,v._rendererInitHook={},v.prototype.addActor=function(t){var r;return r=t instanceof v.Actor?t:new v.Actor(t),i.contains(this._actors,r)||(r.context===void 0&&(r.context=this.context),r.rekapi=this,this._actors[r.id]=r,n(this,i),r.setup(),e(this,"addActor",i,r)),r},v.prototype.getActor=function(t){return this._actors[t]},v.prototype.getActorIds=function(){return i.pluck(this._actors,"id")},v.prototype.getAllActors=function(){return i.clone(this._actors)},v.prototype.removeActor=function(t){return delete this._actors[t.id],delete t.rekapi,t.teardown(),n(this,i),e(this,"removeActor",i,t),this},v.prototype.play=function(t){return y(this),this._playState===k.PAUSED?this._loopTimestamp+=g()-this._pausedAtTime:this._loopTimestamp=g(),this._timesToIterate=t||-1,this._playState=k.PLAYING,f(this),e(this,"playStateChange",i),e(this,"play",i),this},v.prototype.playFrom=function(t,e){return this.play(e),this._loopTimestamp=g()-t,this},v.prototype.playFromCurrent=function(t){return this.playFrom(this._lastUpdatedMillisecond,t)},v.prototype.pause=function(){return this._playState===k.PAUSED?this:(this._playState=k.PAUSED,y(this),this._pausedAtTime=g(),e(this,"playStateChange",i),e(this,"pause",i),this)},v.prototype.stop=function(){return this._playState=k.STOPPED,y(this),i.each(this._actors,function(t){t.stop()}),e(this,"playStateChange",i),e(this,"stop",i),this},v.prototype.isPlaying=function(){return this._playState===k.PLAYING},v.prototype.animationLength=function(){return this._animationLength},v.prototype.lastPositionUpdated=function(){return this._lastUpdatedMillisecond/this._animationLength},v.prototype.actorCount=function(){return i.size(this._actors)},v.prototype.update=function(t){return void 0===t&&(t=this._lastUpdatedMillisecond),e(this,"beforeUpdate",i),i.each(this._actors,function(e){e._updateState(t),"function"==typeof e.render&&e.render(e.context,e.get())}),this._lastUpdatedMillisecond=t,e(this,"afterUpdate",i),this},v.prototype.on=function(t,e){return this._events[t]?(this._events[t].push(e),this):void 0},v.prototype.off=function(t,e){return this._events[t]?(this._events[t]=e?i.without(this._events[t],e):[],this):void 0},v.prototype.exportTimeline=function(){var t={duration:this._animationLength,actors:[]};return i.each(this._actors,function(e){t.actors.push(e.exportTimeline())},this),t},v.prototype.importTimeline=function(t){i.each(t.actors,function(t){var e=new v.Actor;e.importTimeline(t),this.addActor(e)},this)},v.util={},r.Rekapi=v};i.push(function(t){"use strict";function i(t){return t.sort(function(t,e){return t-e})}function a(t,e){var n,r=t._timelinePropertyCacheIndex,i=r.length;for(n=1;i>n;n++)if(r[n]>=e)return n-1;return-1}function o(t){y.each(t._propertyTracks,function(e,n){t._propertyTracks[n]=y.sortBy(t._propertyTracks[n],function(t){return t.millisecond})})}function s(t){y.each(t._timelinePropertyCaches,function(e,n){var r=u(t,+n);y.defaults(e,r)})}function u(t,e){var n={};return y.each(t._propertyTracks,function(t,r){var i=null;if(y.find(t,function(t){return t.millisecond>e?n[r]=i:t.millisecond===e&&(n[r]=t),i=t,!!n[r]}),!n[r]){var a=y.last(t);a&&e>=a.millisecond&&(n[r]=a)}}),n}function c(t){y.each(t._propertyTracks,function(t){y.each(t,function(e,n){e.linkToNext(t[n+1])})})}function p(t,e,n){return y.find(t._propertyTracks[e],function(t){return t.millisecond===n})}function h(t){t._timelinePropertyCaches={},y.each(t._keyframeProperties,function(e){t._timelinePropertyCaches[e.millisecond]||(t._timelinePropertyCaches[e.millisecond]={}),t._timelinePropertyCaches[e.millisecond][e.name]=e},t),t._timelinePropertyCacheIndex=y.keys(t._timelinePropertyCaches),y.each(t._timelinePropertyCacheIndex,function(e,n){t._timelinePropertyCacheIndex[n]=+e},t),i(t._timelinePropertyCacheIndex),s(t),c(t),t.rekapi&&e(t.rekapi,"timelineModified",y)}function l(t){o(t),h(t),n(t.rekapi,y)}var f="linear",d=t.Rekapi,m=d.Tweenable,y=d._;d.Actor=function(t){return t=t||{},m.call(this),y.extend(this,{_propertyTracks:{},_timelinePropertyCaches:{},_timelinePropertyCacheIndex:[],_keyframeProperties:{},id:y.uniqueId(),context:t.context,setup:t.setup||r,render:t.render||r,teardown:t.teardown||r,data:{}}),this};var v=d.Actor,_=function(){};_.prototype=m.prototype,v.prototype=new _,v.prototype.keyframe=function(t,e,r){var i;return r=r||f,"string"==typeof r&&(i=r,r={},y.each(e,function(t,e){r[e]=i})),y.each(e,function(t,e){r[e]=r[e]||f}),y.each(e,function(e,n){var i=new d.KeyframeProperty(t,n,e,r[n]);this._addKeyframeProperty(i)},this),this.rekapi&&n(this.rekapi,y),h(this),this},v.prototype.getKeyframeProperty=function(t,e){var n=this._propertyTracks[t];return n?y.findWhere(n,{millisecond:e}):void 0},v.prototype.modifyKeyframeProperty=function(t,e,n){var r=this.getKeyframeProperty(t,e);return r&&(r.modifyWith(n),l(this)),this},v.prototype.getTrackNames=function(){return y.keys(this._propertyTracks)},v.prototype.getPropertiesInTrack=function(t){var e=this._propertyTracks[t];return e?e.slice(0):void 0},v.prototype.copyProperties=function(t,e){var n={},r={};return y.each(this._propertyTracks,function(t,i){var a=p(this,i,e);a&&(n[i]=a.value,r[i]=a.easing)},this),this.keyframe(t,n,r),this},v.prototype.wait=function(t){var e=this.getEnd();if(e>=t)return this;var n=this.getEnd(),r=u(this,this.getEnd()),i={},a={};return y.each(r,function(t,e){i[e]=t.value,a[e]=t.easing}),this.removeKeyframe(n),this.keyframe(n,i,a),this.keyframe(t,i,a),this},v.prototype.getStart=function(t){var e=[];return t?e.push(this._propertyTracks[t][0].millisecond):y.each(this._propertyTracks,function(t){t.length&&e.push(t[0].millisecond)}),0===e.length&&(e=[0]),Math.min.apply(Math,e)},v.prototype.getEnd=function(t){var e=0,n=this._propertyTracks;return t&&(n={},n[t]=this._propertyTracks[t]),y.each(n,function(t){if(t.length){var n=y.last(t).millisecond;n>e&&(e=n)}},this),e},v.prototype.getLength=function(t){return this.getEnd(t)-this.getStart(t)},v.prototype.hasKeyframeAt=function(t,e){var n=this._propertyTracks;if(e){if(!y.has(n,e))return!1;n=y.pick(n,e)}return void 0!==y.find(n,function(e,n){var r=p(this,n,t);return void 0!==r},this)},v.prototype.moveKeyframe=function(t,e){return!this.hasKeyframeAt(t)||this.hasKeyframeAt(e)?!1:(y.each(this._propertyTracks,function(n,r){var i=p(this,r,t);i&&i.modifyWith({millisecond:e})},this),l(this),!0)},v.prototype.modifyKeyframe=function(t,e,n){return n=n||{},y.each(this._propertyTracks,function(r,i){var a=p(this,i,t);a&&a.modifyWith({value:e[i],easing:n[i]})},this),this},v.prototype.removeKeyframe=function(t){return y.each(this._propertyTracks,function(e){var n=-1,r=!1;if(y.find(e,function(e){return n++,r=t===e.millisecond}),r){var i=e.splice(n,1)[0];i&&delete this._keyframeProperties[i.id]}},this),this.rekapi&&n(this.rekapi,y),h(this),this},v.prototype.removeAllKeyframeProperties=function(){return y.each(this._propertyTracks,function(t){t.length=0},this),this._keyframeProperties={},this.removeKeyframe(0)},v.prototype._addKeyframeProperty=function(t){t.actor=this,this._keyframeProperties[t.id]=t;var e=t.name,n=this._propertyTracks;return this._propertyTracks[e]===void 0?n[e]=[t]:n[e].push(t),o(this),this},v.prototype._updateState=function(t){var e=this.getStart(),n=this.getEnd();if(t=Math.min(n,t),t>=e){var i=a(this,t),o=this._timelinePropertyCaches[this._timelinePropertyCacheIndex[i]],s={};y.each(o,function(e,n){e&&(this._beforeKeyframePropertyInterpolate!==r&&this._beforeKeyframePropertyInterpolate(e),s[n]=e.getValueAt(t),this._afterKeyframePropertyInterpolate!==r&&this._afterKeyframePropertyInterpolate(e,s))},this),this.set(s)}return this},v.prototype._beforeKeyframePropertyInterpolate=r,v.prototype._afterKeyframePropertyInterpolate=r,v.prototype.exportTimeline=function(){var t={start:this.getStart(),end:this.getEnd(),trackNames:this.getTrackNames(),propertyTracks:{}};return y.each(this._propertyTracks,function(e,n){var r=t.propertyTracks[n]=[];y.each(e,function(t){r.push(t.exportPropertyData())})}),t},v.prototype.importTimeline=function(t){y.each(t.propertyTracks,function(t){y.each(t,function(t){var e={};
e[t.name]=t.value,this.keyframe(t.millisecond,e,t.easing)},this)},this)}}),i.push(function(t){"use strict";var e="linear",n=t.Rekapi,r=n.Tweenable,i=n._,a=r.interpolate;n.KeyframeProperty=function(t,n,r,a){return this.id=i.uniqueId("keyframeProperty_"),this.millisecond=t,this.name=n,this.value=r,this.easing=a||e,this.nextProperty=null,this};var o=n.KeyframeProperty;o.prototype.modifyWith=function(t){var e={};i.each(["millisecond","easing","value"],function(n){e[n]=t[n]===void 0?this[n]:t[n]},this),i.extend(this,e)},o.prototype.linkToNext=function(t){this.nextProperty=t||null},o.prototype.getValueAt=function(t){var e,n={},r={};if(this.nextProperty){n[this.name]=this.value,r[this.name]=this.nextProperty.value;var i=this.nextProperty.millisecond-this.millisecond,o=(t-this.millisecond)/i;e=a(n,r,o,this.nextProperty.easing)[this.name]}else e=this.value;return e},o.prototype.exportPropertyData=function(){return{millisecond:this.millisecond,name:this.name,value:this.value,easing:this.easing}}}),i.push(function(t){"use strict";function n(t,e,n){return n!==void 0&&(t[e]=n,t.style[e]=n+"px"),t[e]}function r(t){t.renderer.clear()}function i(t){e(t,"beforeRender",u);var n,r=t.renderer,i=r._renderOrderSorter,a=r._renderOrder.length;if(i){var o=u.sortBy(r._canvasActors,i);n=u.pluck(o,"id")}else n=r._renderOrder;var s,c,p=r._canvasActors;for(c=0;a>c;c++)s=p[n[c]],s.render(s.context,s.get());return e(t,"afterRender",u),t}function a(t,e){t.renderer._renderOrder.push(e.id),t.renderer._canvasActors[e.id]=e}function o(t,e){t.renderer._renderOrder=u.without(t.renderer._renderOrder,e.id),delete t.renderer._canvasActors[e.id]}var s=t.Rekapi,u=s._;s._rendererInitHook.canvas=function(t){"undefined"!=typeof CanvasRenderingContext2D&&t.context instanceof CanvasRenderingContext2D&&(t.renderer=new c(t),u.extend(t._events,{beforeRender:[],afterRender:[]}),t.on("afterUpdate",i),t.on("addActor",a),t.on("removeActor",o),t.on("beforeRender",r))},s.CanvasRenderer=function(t){return this.rekapi=t,this._renderOrder=[],this._renderOrderSorter=null,this._canvasActors={},this};var c=s.CanvasRenderer;c.prototype.height=function(t){return n(this.rekapi.context.canvas,"height",t)},c.prototype.width=function(t){return n(this.rekapi.context.canvas,"width",t)},c.prototype.clear=function(){return this.rekapi.context.clearRect(0,0,this.width(),this.height()),this.rekapi},c.prototype.moveActorToLayer=function(t,e){return this._renderOrder.length>e?(this._renderOrder=u.without(this._renderOrder,t.id),this._renderOrder.splice(e,0,t.id),t):void 0},c.prototype.setOrderFunction=function(t){return this._renderOrderSorter=t,this.rekapi},c.prototype.unsetOrderFunction=function(){return this._renderOrderSorter=null,this.rekapi}}),i.push(function(t){"use strict";function n(t){return 0===t%1}function r(){var t=document.body.style;return"-webkit-animation"in t?"webkit":"-moz-animation"in t?"mozilla":"-ms-animation"in t?"microsoft":"-o-animation"in t?"opera":"animation"in t?"w3":""}function i(t){var e=document.createElement("style"),n="rekapi-"+W++;return e.id=n,e.innerHTML=t,document.head.appendChild(e),e}function a(t){var e=document.createElement("div");K.each(t.getAllActors(),function(t){if(t.context instanceof HTMLElement){var n=t.context,r=n.parentElement;r.replaceChild(e,n),r.replaceChild(n,e)}}),e=null}function o(t,e,n){t.style[e]=n}function s(t){return K.contains(q,t)}function u(t,e){var n=[];return K.each(t,function(t){e[t]&&n.push(t+"("+e[t]+")")}),n.join(" ")}function c(t,e){K.each(H,function(n){o(t,n,e)})}function p(t,e){var n=e.context;if(n instanceof HTMLElement){var r=B.getActorClassName(e);n.className.match(r)||(n.className+=" "+r),e._transformOrder=q.slice(0),e._beforeKeyframePropertyInterpolate=h,e._afterKeyframePropertyInterpolate=l,e.render=K.bind(f,e,e),e.teardown=K.bind(d,e,e)}}function h(t){if("transform"===t.name){var e=t.value,n=t.nextProperty;n&&e.match(/3d\(/g)&&(t.value=e.replace(/3d\(/g,"__THREED__"),n.value=n.value.replace(/3d\(/g,"__THREED__"))}}function l(t,e){if("transform"===t.name){var n=t.value,r=t.nextProperty;if(r&&n.match(/__THREED__/g)){t.value=n.replace(/__THREED__/g,"3d("),r.value=r.value.replace(/__THREED__/g,"3d(");var i=t.name;e[i]=e[i].replace(/__THREED__/g,"3d(")}}}function f(t,e,n){var r=K.keys(n),i=K.filter(r,s),a=K.reject(r,s),p=K.pick(n,a);if(i.length){var h=K.pick(n,i),l=u(t._transformOrder,h);c(e,l)}else n.transform&&c(e,n.transform);K.each(p,function(t,n){o(e,n,t)})}function d(t){var e=t.context,n=e.className.match(/\S+/g),r=K.without(n,B.getActorClassName(t));e.className=r}function m(t,e){e=e||{};var n=[],r=e.name||B.getActorClassName(t),i=e.fps||Y,a=Math.ceil(t.rekapi.animationLength()/1e3*i),o=!O(t),s=g(t,r,o,e.vendors,e.iterations,e.isCentered),u=y(t,r,a,o,e.vendors);return n.push(s),n.push(u),n.join("\n")}function y(t,e,n,r,i){var a=t.getTrackNames(),o=[];r?o.push(M(t,n)):K.each(a,function(e){o.push(E(t,n,e))});var s=[];return r?s.push(v(o[0],e,i)):K.each(a,function(t,n){s.push(v(o[n],e+"-"+t,i))}),s=s.join("\n")}function v(t,e,n){n=n||["w3"];var r=[];return K.each(n,function(n){var i=z($,[X[n],e,t]),a=_(i,n);r.push(a)}),r.join("\n")}function _(t,e){var n=RegExp(V,"g"),r=X[e]+"transform",i=RegExp(G,"g"),a=X[e],o=t.replace(i,a).replace(n,r);return o}function g(t,e,n,r,i,a){r=r||["w3"];var o,s=[];K.each(r,function(r){o=k(t,e,r,n,i,a),s.push(o)});var u=z(J,[e,s.join("\n")]);return u}function k(t,e,n,r,i,a){var o=[],s=X[n];return o.push(T(t,e,s,r)),o.push(w(t,s)),o.push(P(t,s)),o.push(x(s)),o.push(A(s)),o.push(S(t.rekapi,s,i)),a&&o.push(b(s)),o.join("\n")}function T(t,e,n,r){var i=z("  %sanimation-name:",[n]),a=t.getTrackNames();return r?i+=z(" %s-keyframes;",[e]):(K.each(a,function(t){i+=z(" %s-%s-keyframes,",[e,t])}),i=i.slice(0,i.length-1),i+=";"),i}function w(t,e){return z("  %sanimation-duration: %sms;",[e,t.getEnd()-t.getStart()])}function P(t,e){return z("  %sanimation-delay: %sms;",[e,t.getStart()])}function x(t){return z("  %sanimation-fill-mode: forwards;",[t])}function A(t){return z("  %sanimation-timing-function: linear;",[t])}function S(t,e,n){var r;r=n?n:-1===t._timesToIterate?"infinite":t._timesToIterate;var i="  %sanimation-iteration-count: %s;";return z(i,[e,r])}function b(t){return z("  %stransform-origin: 0 0;",[t])}function I(t){var e=!1;if(t.nextProperty){var n,r=t.nextProperty.easing.split(" "),i=0,a=r.length,o=r[0];for(i;a>i;i++){if(n=r[i],!Z[n]||o!==n){e=!1;break}e=!0,o=n}}return e}function O(t){return K.any(t._keyframeProperties,I)}function C(t,e,r){var i=[],a=t.name;"transform"===t.name&&(a=V);var o=Z[t.nextProperty.easing.split(" ")[0]],s=z("cubic-bezier(%s)",[o]),u=n(e)?e:e.toFixed(2),c=n(r)?r:r.toFixed(2);return i.push(z("  %s% {%s:%s;%sanimation-timing-function: %s;}",[u,a,t.value,G,s])),i.push(z("  %s% {%s:%s;}",[c,a,t.nextProperty.value])),i.join("\n")}function E(t,e,n){var r=[],i=t.getEnd(),a=t.getStart(),o=t.getLength(),s=R(t,n,a);s&&r.push(s);var u=!1;K.each(t._propertyTracks[n],function(n){var i,s,c,p=j(n,a,o),h=n.nextProperty;if(h){i=j(h,a,o);var l=i-p;s=Math.floor(l/100*e)||1,c=l/s}else i=100,s=1,c=1;var f;if(I(n)){if(f=C(n,p,i),u){var d=r.length,m=r[d-1],y=m.split("\n")[0];r[d-1]=y}u=!0}else f=D(t,s,c,a,p,n),u&&f.shift(),f.length&&(f=f.join("\n")),u=!1;f.length&&r.push(f)});var c=F(t,n,a,i);return c&&r.push(c),r.join("\n")}function M(t,e){return D(t,e+1,100/e,0,0).join("\n")}function R(t,e,n){var r=t._propertyTracks[e][0];if(r.millisecond!==n){var i=D(t,1,1,r.millisecond,0,r);return i.join("\n")}}function F(t,e,n,r){var i=K.last(t._propertyTracks[e]);if(i.millisecond!==r){var a=D(t,1,1,n,100,i);return a.join("\n")}}function j(t,e,n){return 100*((t.millisecond-e)/n)}function D(t,e,n,r,i,a){var o,s,u,c=[],p=t.getLength();for(o=0;e>o;o++)s=i+o*n,t._updateState(s/100*p+r),u=+s.toFixed(2)+"% ",a?c.push("  "+u+N(t,a.name)):c.push("  "+u+N(t));return c}function N(t,e){var n,r=["{"];if(e){n={};var i=t.get()[e];i!==void 0&&(n[e]=i)}else n=t.get();var a;return K.each(n,function(t,e){a=t;var n=e;"transform"===e&&(n=V),r.push(n+":"+a+";")}),r.push("}"),r.join("")}var L=t.Rekapi,K=L._,U=L.Tweenable.now,H=["transform","webkitTransform","MozTransform","oTransform","msTransform"],q=["translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","skewX","skewY"],Q=250,z=function(t,e){var n=t;return K.each(e,function(t){n=n.replace("%s",t)}),n};L._rendererInitHook.cssAnimate=function(t){var e=t.context;1===e.nodeType&&(t.renderer=new B(t))};var W=0;L.DOMRenderer=function(t){return this.rekapi=t,this._playTimestamp=null,this._cachedCSS=null,this._styleElement=null,this._stopSetTimeoutHandle=null,t.on("timelineModified",K.bind(function(){this._cachedCSS=null},this)),t.on("addActor",p),this};var B=L.DOMRenderer;B.prototype.canAnimateWithCSS=function(){return!!r()},B.prototype.animateWithCSS=function(t){this.isPlaying()&&this.stop();var n=this._cachedCSS||this.prerender.apply(this,arguments);if(this._styleElement=i(n),this._playTimestamp=U(),navigator.userAgent.match(/Presto/)&&a(this.rekapi),t){var r=t*this.rekapi.animationLength();this._stopSetTimeoutHandle=setTimeout(K.bind(this.stop,this,!0),r+Q)}e(this.rekapi,"play",K)},B.prototype.stop=function(t){if(this.isPlaying()){clearTimeout(this._stopSetTimeoutHandle),this._styleElement.innerHTML="",document.head.removeChild(this._styleElement),this._styleElement=null;var n;n=t?this.rekapi.animationLength():(U()-this._playTimestamp)%this.rekapi.animationLength(),this.rekapi.update(n),e(this.rekapi,"stop",K)}},B.prototype.prerender=function(t,e){return this._cachedCSS=this.toString({vendors:[r()],fps:e,iterations:t})},B.prototype.isPlaying=function(){return!!this._styleElement},B.getActorClassName=function(t){return"actor-"+t.id},B.prototype.setActorTransformOrder=function(t,e){var n=K.reject(e,s);if(n.length)throw"Unknown or unsupported transform functions: "+n.join(", ");return t._transformOrder=K.uniq(e),this.rekapi};var Y=30,V="TRANSFORM",G="VENDOR",X={microsoft:"-ms-",mozilla:"-moz-",opera:"-o-",w3:"",webkit:"-webkit-"},Z={linear:".25,.25,.75,.75",easeInQuad:".55,.085,.68,.53",easeInCubic:".55,.055,.675,.19",easeInQuart:".895,.03,.685,.22",easeInQuint:".755,.05,.855,.06",easeInSine:".47,0,.745,.715",easeInExpo:".95,.05,.795,.035",easeInCirc:".6,.04,.98, .335",easeOutQuad:".25,.46,.45,.94",easeOutCubic:".215,.61,.355,1",easeOutQuart:".165,.84,.44,1",easeOutQuint:".23,1,.32,1",easeOutSine:".39,.575,.565,1",easeOutExpo:".19,1,.22,1",easeOutCirc:".075,.82,.165,1",easeInOutQuad:".455,.03,.515,.955",easeInOutCubic:".645,.045,.355,1",easeInOutQuart:".77,0,.175,1",easeInOutQuint:".86,0.07,1",easeInOutSine:".445,.05,.55,.95",easeInOutExpo:"1,0,0,1",easeInOutCirc:".785,.135,.15,.86"},$=["@%skeyframes %s-keyframes {","%s","}"].join("\n"),J=[".%s {","%s","}"].join("\n");L.DOMRenderer.prototype.toString=function(t){t=t||{};var e=[];return K.each(this.rekapi.getAllActors(),function(n){n.context instanceof HTMLElement&&e.push(m(n,t))}),e.join("\n")}});var o=function(t,e){"use strict";var n=e?{}:t,r=e&&e.underscore?e.underscore:n._,o=e&&e.Tweenable?e.Tweenable:n.Tweenable;return a(n,r,o),r.each(i,function(t){t(n)}),n.Rekapi};if("function"==typeof define&&define.amd){var s="undefined"!=typeof _;define(["shifty","underscore"],function(t,e){var n=null!=e,r={Tweenable:t,underscore:n?e:_},i=o({},r);return!s&&n&&(this._=void 0),i})}else o(this)}(this);