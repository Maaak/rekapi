/*! Rekapi - v0.16.4 - 2014-01-01 - http://rekapi.com */
(function(){function t(t,e,n,r){n.each(t._events[e],function(e){e(t,r)})}function e(t,e){var n=[];e.each(t._actors,function(t){n.push(t.getEnd())}),t._animationLength=Math.max.apply(Math,n)}function n(){}var r=[],i=function(n,r,i){"use strict";function o(t,e){var n=Math.floor(e/t._animationLength);return n}function a(t){return k()-t._loopTimestamp}function s(t,e){return e>=t._timesToIterate&&-1!==t._timesToIterate}function c(e,n){s(e,n)&&(e.stop(),t(e,"animationComplete",r))}function p(t,e,n){var r;return r=s(t,n)?t._animationLength:e%t._animationLength}function u(t,e){var n=o(t,e),r=p(t,e,n);t.update(r),c(t,n)}function h(t){u(t,a(t))}function f(t){var e=function(){f(t),h(t)};t._loopId=t._scheduleUpdate.call?t._scheduleUpdate.call(v,e,g):setTimeout(e,g)}function l(){return v.requestAnimationFrame||v.webkitRequestAnimationFrame||v.oRequestAnimationFrame||v.msRequestAnimationFrame||v.mozCancelRequestAnimationFrame&&v.mozRequestAnimationFrame||v.setTimeout}function m(){return v.cancelAnimationFrame||v.webkitCancelAnimationFrame||v.oCancelAnimationFrame||v.msCancelAnimationFrame||v.mozCancelRequestAnimationFrame||v.clearTimeout}function d(t){t._cancelUpdate.call?t._cancelUpdate.call(v,t._loopId):clearTimeout(t._loopId)}function y(t){return this.config=t||{},this.context=this.config.context||{},this._actors={},this._playState=T.STOPPED,this._events={animationComplete:[],playStateChange:[],play:[],pause:[],stop:[],beforeUpdate:[],afterUpdate:[],addActor:[],removeActor:[]},this._timesToIterate=-1,this._animationLength=0,this._loopId=null,this._loopTimestamp=null,this._pausedAtTime=null,this._lastUpdatedMillisecond=0,r.extend(this.config,t),this._scheduleUpdate=l(),this._cancelUpdate=m(),r.each(this._contextInitHook,function(t){t.call(this)},this),this}var _=Function,v=new _("return this")(),g=1e3/60,k=i.now,T={STOPPED:"stopped",PAUSED:"paused",PLAYING:"playing"};y.Tweenable=i,y._=r,y.prototype._contextInitHook={},y.prototype.addActor=function(n){return r.contains(this._actors,n)||(n.context()||n.context(this.context),n.rekapi=this,this._actors[n.id]=n,e(this,r),n.setup(),t(this,"addActor",r,n)),this},y.prototype.getActor=function(t){return this._actors[t]},y.prototype.getActorIds=function(){return r.pluck(this._actors,"id")},y.prototype.getAllActors=function(){return r.clone(this._actors)},y.prototype.removeActor=function(n){return delete this._actors[n.id],delete n.rekapi,n.teardown(),e(this,r),t(this,"removeActor",r,n),this},y.prototype.play=function(e){return d(this),this._playState===T.PAUSED?this._loopTimestamp+=k()-this._pausedAtTime:this._loopTimestamp=k(),this._timesToIterate=e||-1,this._playState=T.PLAYING,f(this),t(this,"playStateChange",r),t(this,"play",r),this},y.prototype.playFrom=function(t,e){return this.play(e),this._loopTimestamp=k()-t,this},y.prototype.playFromCurrent=function(t){return this.playFrom(this._lastUpdatedMillisecond,t)},y.prototype.pause=function(){return this._playState===T.PAUSED?this:(this._playState=T.PAUSED,d(this),this._pausedAtTime=k(),t(this,"playStateChange",r),t(this,"pause",r),this)},y.prototype.stop=function(){return this._playState=T.STOPPED,d(this),r.each(this._actors,function(t){t.stop()}),t(this,"playStateChange",r),t(this,"stop",r),this},y.prototype.isPlaying=function(){return this._playState===T.PLAYING},y.prototype.animationLength=function(){return this._animationLength},y.prototype.lastPositionUpdated=function(){return this._lastUpdatedMillisecond/this._animationLength},y.prototype.actorCount=function(){return r.size(this._actors)},y.prototype.update=function(e){return void 0===e&&(e=this._lastUpdatedMillisecond),t(this,"beforeUpdate",r),r.each(this._actors,function(t){t.updateState(e),"function"==typeof t.update&&t.update(t.context(),t.get())}),this._lastUpdatedMillisecond=e,t(this,"afterUpdate",r),this},y.prototype.on=function(t,e){return this._events[t]?(this._events[t].push(e),this):void 0},y.prototype.off=function(t,e){return this._events[t]?(this._events[t]=e?r.without(this._events[t],e):[],this):void 0},y.prototype.exportTimeline=function(){var t={duration:this._animationLength,actors:[]};return r.each(this._actors,function(e){t.actors.push(e.exportTimeline())},this),t},y.prototype.importTimeline=function(t){r.each(t.actors,function(t){var e=new y.Actor;e.importTimeline(t),this.addActor(e)},this)},y.util={},n.Rekapi=y};r.push(function(r){"use strict";function i(t){return t.sort(function(t,e){return t-e})}function o(t,e){var n,r=t._timelinePropertyCacheIndex,i=r.length;for(n=1;i>n;n++)if(r[n]>=e)return n-1;return-1}function a(t){y.each(t._propertyTracks,function(e,n){t._propertyTracks[n]=y.sortBy(t._propertyTracks[n],function(t){return t.millisecond})})}function s(t){y.each(t._timelinePropertyCaches,function(e,n){var r=c(t,+n);y.defaults(e,r)})}function c(t,e){var n={};return y.each(t._propertyTracks,function(t,r){var i=null;if(y.find(t,function(t){return t.millisecond>e?n[r]=i:t.millisecond===e&&(n[r]=t),i=t,!!n[r]}),!n[r]){var o=y.last(t);o&&e>=o.millisecond&&(n[r]=o)}}),n}function p(t){y.each(t._propertyTracks,function(t){y.each(t,function(e,n){e.linkToNext(t[n+1])})})}function u(t,e,n){return y.find(t._propertyTracks[e],function(t){return t.millisecond===n})}function h(e){e._timelinePropertyCaches={},y.each(e._keyframeProperties,function(t){e._timelinePropertyCaches[t.millisecond]||(e._timelinePropertyCaches[t.millisecond]={}),e._timelinePropertyCaches[t.millisecond][t.name]=t},e),e._timelinePropertyCacheIndex=y.keys(e._timelinePropertyCaches),y.each(e._timelinePropertyCacheIndex,function(t,n){e._timelinePropertyCacheIndex[n]=+t},e),i(e._timelinePropertyCacheIndex),s(e),p(e),e.rekapi&&t(e.rekapi,"timelineModified",y)}function f(t){a(t),h(t),e(t.rekapi,y)}var l="linear",m=r.Rekapi,d=m.Tweenable,y=m._;m.Actor=function(t){return t=t||{},d.call(this),y.extend(this,{_propertyTracks:{},_timelinePropertyCaches:{},_timelinePropertyCacheIndex:[],_keyframeProperties:{},id:y.uniqueId(),setup:t.setup||n,update:t.update||n,teardown:t.teardown||n,data:{}}),t.context&&this.context(t.context),this};var _=m.Actor,v=function(){};v.prototype=d.prototype,_.prototype=new v,_.prototype.context=function(t){return t&&(this._context=t),this._context},_.prototype.keyframe=function(t,n,r){var i;return r=r||l,"string"==typeof r&&(i=r,r={},y.each(n,function(t,e){r[e]=i})),y.each(n,function(t,e){r[e]=r[e]||l}),y.each(n,function(e,n){var i=new m.KeyframeProperty(this,t,n,e,r[n]);this._keyframeProperties[i.id]=i,this._propertyTracks[n]||(this._propertyTracks[n]=[]),this._propertyTracks[n].push(i),a(this)},this),this.rekapi&&e(this.rekapi,y),h(this),this},_.prototype.getKeyframeProperty=function(t,e){return this._propertyTracks[t]&&this._propertyTracks[t][e]?this._propertyTracks[t][e]:void 0},_.prototype.modifyKeyframeProperty=function(t,e,n){return this._propertyTracks[t]&&this._propertyTracks[t][e]&&this._propertyTracks[t][e].modifyWith(n),f(this),this},_.prototype.getTrackNames=function(){return y.keys(this._propertyTracks)},_.prototype.getTrackLength=function(t){return this._propertyTracks[t]?this._propertyTracks[t].length:void 0},_.prototype.copyProperties=function(t,e){var n={},r={};return y.each(this._propertyTracks,function(t,i){var o=u(this,i,e);o&&(n[i]=o.value,r[i]=o.easing)},this),this.keyframe(t,n,r),this},_.prototype.wait=function(t){var e=this.getEnd();if(e>=t)return this;var n=this.getEnd(),r=c(this,this.getEnd()),i={},o={};return y.each(r,function(t,e){i[e]=t.value,o[e]=t.easing}),this.removeKeyframe(n),this.keyframe(n,i,o),this.keyframe(t,i,o),this},_.prototype.getStart=function(t){var e=[];return t?e.push(this._propertyTracks[t][0].millisecond):y.each(this._propertyTracks,function(t){t.length&&e.push(t[0].millisecond)}),0===e.length&&(e=[0]),Math.min.apply(Math,e)},_.prototype.getEnd=function(t){var e=0,n=this._propertyTracks;return t&&(n={},n[t]=this._propertyTracks[t]),y.each(n,function(t){if(t.length){var n=y.last(t).millisecond;n>e&&(e=n)}},this),e},_.prototype.getLength=function(t){return this.getEnd(t)-this.getStart(t)},_.prototype.hasKeyframeAt=function(t,e){var n=this._propertyTracks;if(e){if(!y.has(n,e))return!1;n=y.pick(n,e)}return void 0!==y.find(n,function(e,n){var r=u(this,n,t);return void 0!==r},this)},_.prototype.moveKeyframe=function(t,e){return!this.hasKeyframeAt(t)||this.hasKeyframeAt(e)?!1:(y.each(this._propertyTracks,function(n,r){var i=u(this,r,t);i&&i.modifyWith({millisecond:e})},this),f(this),!0)},_.prototype.modifyKeyframe=function(t,e,n){return n=n||{},y.each(this._propertyTracks,function(r,i){var o=u(this,i,t);o&&o.modifyWith({value:e[i],easing:n[i]})},this),this},_.prototype.removeKeyframe=function(t){return y.each(this._propertyTracks,function(e){var n=-1,r=!1;if(y.find(e,function(e){return n++,r=t===e.millisecond}),r){var i=e.splice(n,1)[0];i&&delete this._keyframeProperties[i.id]}},this),this.rekapi&&e(this.rekapi,y),h(this),this},_.prototype.removeAllKeyframeProperties=function(){return y.each(this._propertyTracks,function(t){t.length=0},this),this._keyframeProperties={},this.removeKeyframe(0)},_.prototype.updateState=function(t){var e=this.getStart(),r=this.getEnd();if(t=Math.min(r,t),t>=e){var i=o(this,t),a=this._timelinePropertyCaches[this._timelinePropertyCacheIndex[i]],s={};y.each(a,function(e,r){e&&(this._beforeKeyframePropertyInterpolate!==n&&this._beforeKeyframePropertyInterpolate(e),s[r]=e.getValueAt(t),this._afterKeyframePropertyInterpolate!==n&&this._afterKeyframePropertyInterpolate(e,s))},this),this.set(s)}return this},_.prototype._beforeKeyframePropertyInterpolate=n,_.prototype._afterKeyframePropertyInterpolate=n,_.prototype.exportTimeline=function(){var t={start:this.getStart(),end:this.getEnd(),trackNames:this.getTrackNames(),propertyTracks:{}};return y.each(this._propertyTracks,function(e,n){var r=t.propertyTracks[n]=[];y.each(e,function(t){r.push(t.exportPropertyData())})}),t},_.prototype.importTimeline=function(t){y.each(t.propertyTracks,function(t){y.each(t,function(t){var e={};e[t.name]=t.value,this.keyframe(t.millisecond,e,t.easing)},this)},this)}}),r.push(function(t){"use strict";var e="linear",n=t.Rekapi,r=n.Tweenable,i=n._,o=r.interpolate;n.KeyframeProperty=function(t,n,r,o,a){return this.id=i.uniqueId("keyframeProperty_"),this.ownerActor=t,this.millisecond=n,this.name=r,this.value=o,this.easing=a||e,this.nextProperty=null,this};var a=n.KeyframeProperty;a.prototype.modifyWith=function(t){var e={};i.each(["millisecond","easing","value"],function(n){e[n]=t[n]===void 0?this[n]:t[n]},this),i.extend(this,e)},a.prototype.linkToNext=function(t){this.nextProperty=t||null},a.prototype.getValueAt=function(t){var e,n={},r={};if(this.nextProperty){n[this.name]=this.value,r[this.name]=this.nextProperty.value;var i=this.nextProperty.millisecond-this.millisecond,a=(t-this.millisecond)/i;e=o(n,r,a,this.nextProperty.easing)[this.name]}else e=this.value;return e},a.prototype.exportPropertyData=function(){return{millisecond:this.millisecond,name:this.name,value:this.value,easing:this.easing}}}),r.push(function(e){"use strict";function n(t,e,n){return n!==void 0&&(t[e]=n,t.style[e]=n+"px"),t[e]}function r(t){t.config.clearOnUpdate&&t.canvas.clear()}function i(e){t(e,"beforeDraw",c);var n,r=e.canvas._drawOrder.length;if(e.canvas._drawOrderSorter){var i=c.sortBy(e.canvas._canvasActors,e.canvas._drawOrderSorter);n=c.pluck(i,"id")}else n=e.canvas._drawOrder;var o,a,s;for(s=0;r>s;s++)o=e.canvas._canvasActors[n[s]],a=o.context(),o.draw(a,o.get());return t(e,"afterDraw",c),e}function o(t,e){e instanceof s.CanvasActor&&(t.canvas._drawOrder.push(e.id),t.canvas._canvasActors[e.id]=e)}function a(t,e){e instanceof s.CanvasActor&&(t.canvas._drawOrder=c.without(t.canvas._drawOrder,e.id),delete t.canvas._canvasActors[e.id])}var s=e.Rekapi,c=s._;s.prototype._contextInitHook.canvas=function(){this.context.getContext&&(this.canvas=new p(this),this.config.clearOnUpdate=!0,c.extend(this._events,{beforeDraw:[],afterDraw:[]}),c.each(["Height","Width"],function(t){var e=t.toLowerCase();this.config[e]&&(this.canvas[e](this.config[e]),delete this.config[t])},this),this.on("afterUpdate",i),this.on("addActor",o),this.on("removeActor",a),this.on("beforeDraw",r))},s.CanvasRenderer=function(t){return this.rekapi=t,this._drawOrder=[],this._drawOrderSorter=null,this._canvasActors={},this};var p=s.CanvasRenderer;p.prototype.height=function(t){return n(this.rekapi.context,"height",t)},p.prototype.width=function(t){return n(this.rekapi.context,"width",t)},p.prototype.clear=function(){return this.rekapi.context.getContext&&this.context().clearRect(0,0,this.width(),this.height()),this.rekapi},p.prototype.context=function(){return this.rekapi.context.getContext("2d")},p.prototype.moveActorToLayer=function(t,e){return this._drawOrder.length>e?(this._drawOrder=c.without(this._drawOrder,t.id),this._drawOrder.splice(e,0,t.id),t):void 0},p.prototype.setOrderFunction=function(t){return this._drawOrderSorter=t,this.rekapi},p.prototype.unsetOrderFunction=function(){return this._drawOrderSorter=null,this.rekapi}}),r.push(function(t){"use strict";function e(){}var r=t.Rekapi;r._,r.CanvasActor=function(t){return r.Actor.call(this,t),t=t||{},this.draw=t.draw||n,this};var i=r.CanvasActor;e.prototype=r.Actor.prototype,i.prototype=new e,i.prototype.context=function(t){return t&&(this._context=t),this._context&&this._context.getContext("2d")},i.prototype.moveToLayer=function(t){return this.rekapi.canvas.moveActorToLayer(this,t)}}),r.push(function(t){"use strict";function e(t,e,n){t.style[e]=n}function n(t){return s.contains(p,t)}function r(t,e){var n=[];return s.each(t,function(t){e[t]&&n.push(t+"("+e[t]+")")}),n.join(" ")}function i(t,n){s.each(c,function(r){e(t,r,n)})}function o(){}var a=t.Rekapi,s=a._,c=["transform","webkitTransform","MozTransform","oTransform","msTransform"],p=["translateX","translateY","scale","scaleX","scaleY","rotate","skewX","skewY"];a.DOMActor=function(t,e){a.Actor.call(this,e),this._context=t;var n=this.getCSSName();return this._context.className.match(n)||(this._context.className+=" "+n),this._transformOrder=p.slice(0),delete this.update,delete this.teardown,this};var u=a.DOMActor;o.prototype=a.Actor.prototype,u.prototype=new o,u.prototype.update=function(t,o){var a=s.keys(o),c=s.filter(a,n),p=s.reject(a,n),u=s.pick(o,p);if(c.length){var h=s.pick(o,c),f=r(this._transformOrder,h);i(t,f)}else o.transform&&i(t,o.transform);s.each(u,function(n,r){e(t,r,n)},this)},u.prototype._beforeKeyframePropertyInterpolate=function(t){if("transform"===t.name){var e=t.value,n=t.nextProperty;n&&e.match(/3d\(/g)&&(t.value=e.replace(/3d\(/g,"__THREED__"),n.value=n.value.replace(/3d\(/g,"__THREED__"))}},u.prototype._afterKeyframePropertyInterpolate=function(t,e){if("transform"===t.name){var n=t.value,r=t.nextProperty;if(r&&n.match(/__THREED__/g)){t.value=n.replace(/__THREED__/g,"3d("),r.value=r.value.replace(/__THREED__/g,"3d(");var i=t.name;e[i]=e[i].replace(/__THREED__/g,"3d(")}}},u.prototype.teardown=function(){var t=this._context.className.match(/\S+/g),e=s.without(t,this.getCSSName());this._context.className=e},u.prototype.getCSSName=function(){return"actor-"+this.id},u.prototype.setTransformOrder=function(t){var e=s.reject(t,n);if(e.length)throw"Unknown or unsupported transform functions: "+e.join(", ");return this._transformOrder=s.uniq(t),this}}),r.push(function(t){"use strict";function e(t){return 0===t%1}function n(t,e,n,i,o){var a=t.getTrackNames(),s=[];i?s.push(v(t,n)):w.each(a,function(e){s.push(_(t,n,e))});var c=[];return i?c.push(r(s[0],e,o)):w.each(a,function(t,n){c.push(r(s[n],e+"-"+t,o))}),c=c.join("\n")}function r(t,e,n){n=n||["w3"];var r=[];return w.each(n,function(n){var o=D(b,[O[n],e,t]),a=i(o,n);r.push(a)}),r.join("\n")}function i(t,e){var n=RegExp(C,"g"),r=O[e]+"transform",i=RegExp(I,"g"),o=O[e],a=t.replace(i,o).replace(n,r);return a}function o(t,e,n,r,i,o){r=r||["w3"];var s,c=[];w.each(r,function(r){s=a(t,e,r,n,i,o),c.push(s)});var p=D(R,[e,c.join("\n")]);return p}function a(t,e,n,r,i,o){var a=[],m=O[n];return a.push(s(t,e,m,r)),a.push(c(t,m)),a.push(p(t,m)),a.push(u(m)),a.push(h(m)),a.push(f(t.rekapi,m,i)),o&&a.push(l(m)),a.join("\n")}function s(t,e,n,r){var i=D("  %sanimation-name:",[n]),o=t.getTrackNames();return r?i+=D(" %s-keyframes;",[e]):(w.each(o,function(t){i+=D(" %s-%s-keyframes,",[e,t])}),i=i.slice(0,i.length-1),i+=";"),i}function c(t,e){return D("  %sanimation-duration: %sms;",[e,t.getEnd()-t.getStart()])}function p(t,e){return D("  %sanimation-delay: %sms;",[e,t.getStart()])}function u(t){return D("  %sanimation-fill-mode: forwards;",[t])}function h(t){return D("  %sanimation-timing-function: linear;",[t])}function f(t,e,n){var r;r=n?n:-1===t._timesToIterate?"infinite":t._timesToIterate;var i="  %sanimation-iteration-count: %s;";return D(i,[e,r])}function l(t){return D("  %stransform-origin: 0 0;",[t])}function m(t){var e=!1;if(t.nextProperty){var n,r=t.nextProperty.easing.split(" "),i=0,o=r.length,a=r[0];for(i;o>i;i++){if(n=r[i],!E[n]||a!==n){e=!1;break}e=!0,a=n}}return e}function d(t){return w.any(t._keyframeProperties,m)}function y(t,n,r){var i=[],o=t.name;"transform"===t.name&&(o=C);var a=E[t.nextProperty.easing.split(" ")[0]],s=D("cubic-bezier(%s)",[a]),c=e(n)?n:n.toFixed(2),p=e(r)?r:r.toFixed(2);return i.push(D("  %s% {%s:%s;%sanimation-timing-function: %s;}",[c,o,t.value,I,s])),i.push(D("  %s% {%s:%s;}",[p,o,t.nextProperty.value])),i.join("\n")}function _(t,e,n){var r=[],i=t.getEnd(),o=t.getStart(),a=t.getLength(),s=g(t,n,o);s&&r.push(s);var c=!1;w.each(t._propertyTracks[n],function(n){var i,s,p,u=T(n,o,a),h=n.nextProperty;if(h){i=T(h,o,a);var f=i-u;s=Math.floor(f/100*e)||1,p=f/s}else i=100,s=1,p=1;var l;if(m(n)){if(l=y(n,u,i),c){var d=r.length,_=r[d-1],v=_.split("\n")[0];r[d-1]=v}c=!0}else l=x(t,s,p,o,u,n),c&&l.shift(),l.length&&(l=l.join("\n")),c=!1;l.length&&r.push(l)});var p=k(t,n,o,i);return p&&r.push(p),r.join("\n")}function v(t,e){return x(t,e+1,100/e,0,0).join("\n")}function g(t,e,n){var r=t._propertyTracks[e][0];if(r.millisecond!==n){var i=x(t,1,1,r.millisecond,0,r);return i.join("\n")}}function k(t,e,n,r){var i=w.last(t._propertyTracks[e]);if(i.millisecond!==r){var o=x(t,1,1,n,100,i);return o.join("\n")}}function T(t,e,n){return 100*((t.millisecond-e)/n)}function x(t,e,n,r,i,o){var a,s,c,p=[],u=t.getLength();for(a=0;e>a;a++)s=i+a*n,t.updateState(s/100*u+r),c=+s.toFixed(2)+"% ",o?p.push("  "+c+S(t,o.name)):p.push("  "+c+S(t));return p}function S(t,e){var n,r=["{"];if(e){n={};var i=t.get()[e];i!==void 0&&(n[e]=i)}else n=t.get();var o;return w.each(n,function(t,e){o=t;var n=e;"transform"===e&&(n=C),r.push(n+":"+o+";")}),r.push("}"),r.join("")}var A=t.Rekapi,w=A._,P=30,C="TRANSFORM",I="VENDOR",O=A.util.VENDOR_PREFIXES={microsoft:"-ms-",mozilla:"-moz-",opera:"-o-",w3:"",webkit:"-webkit-"},E={linear:".25,.25,.75,.75",easeInQuad:".55,.085,.68,.53",easeInCubic:".55,.055,.675,.19",easeInQuart:".895,.03,.685,.22",easeInQuint:".755,.05,.855,.06",easeInSine:".47,0,.745,.715",easeInExpo:".95,.05,.795,.035",easeInCirc:".6,.04,.98, .335",easeOutQuad:".25,.46,.45,.94",easeOutCubic:".215,.61,.355,1",easeOutQuart:".165,.84,.44,1",easeOutQuint:".23,1,.32,1",easeOutSine:".39,.575,.565,1",easeOutExpo:".19,1,.22,1",easeOutCirc:".075,.82,.165,1",easeInOutQuad:".455,.03,.515,.955",easeInOutCubic:".645,.045,.355,1",easeInOutQuart:".77,0,.175,1",easeInOutQuint:".86,0.07,1",easeInOutSine:".445,.05,.55,.95",easeInOutExpo:"1,0,0,1",easeInOutCirc:".785,.135,.15,.86"},b=["@%skeyframes %s-keyframes {","%s","}"].join("\n"),R=[".%s {","%s","}"].join("\n");A.prototype.toCSS=function(t){t=t||{};var e=[];return w.each(this.getAllActors(),function(n){n instanceof A.DOMActor&&e.push(n.toCSS(t))}),e.join("\n")},A.Actor.prototype.toCSS=function(t){t=t||{};var e=[],r=t.name||this.getCSSName(),i=t.fps||P,a=Math.ceil(this.rekapi.animationLength()/1e3*i),s=!d(this),c=o(this,r,s,t.vendors,t.iterations,t.isCentered),p=n(this,r,a,s,t.vendors);return e.push(c),e.push(p),e.join("\n")};var D=A.util.printf=function(t,e){var n=t;return w.each(e,function(t){n=n.replace("%s",t)}),n}}),r.push(function(e){"use strict";function n(){var t=document.body.style;return"-webkit-animation"in t?"webkit":"-moz-animation"in t?"mozilla":"-ms-animation"in t?"microsoft":"-o-animation"in t?"opera":"animation"in t?"w3":""}function r(t){var e=document.createElement("style"),n="rekapi-"+p++;return e.id=n,e.innerHTML=t,document.head.appendChild(e),e}function i(t){var e=document.createElement("div");a.each(t.getAllActors(),function(t){if(t instanceof o.DOMActor){var n=t._context,r=n.parentElement;r.replaceChild(e,n),r.replaceChild(n,e)}}),e=null}var o=e.Rekapi,a=o._,s=o.Tweenable.now,c=250;o.prototype._contextInitHook.cssAnimate=function(){this.css=new u(this)};var p=0;o.CSSRenderer=function(t){if(!o.DOMActor&&!o.prototype.toCSS)throw"CSSRenderer requires the DOMActor and toCSS modules.";return this.kapi=t,this._playTimestamp=null,this._cachedCSS=null,this._styleElement=null,this._stopSetTimeoutHandle=null,t.on("timelineModified",a.bind(function(){this._cachedCSS=null},this)),this};var u=o.CSSRenderer;u.prototype.canAnimateWithCSS=function(){return!!n()},u.prototype.prerender=function(t,e){return this._cachedCSS=this.kapi.toCSS({vendors:[n()],fps:e,iterations:t})},u.prototype.play=function(e){this.isPlaying()&&this.stop();var n=this._cachedCSS||this.prerender.apply(this,arguments);if(this._styleElement=r(n),this._playTimestamp=s(),navigator.userAgent.match(/Presto/)&&i(this.kapi),e){var o=e*this.kapi.animationLength();this._stopSetTimeoutHandle=setTimeout(a.bind(this.stop,this,!0),o+c)}t(this.kapi,"play",a)},u.prototype.stop=function(e){if(this.isPlaying()){clearTimeout(this._stopSetTimeoutHandle),this._styleElement.innerHTML="",document.head.removeChild(this._styleElement),this._styleElement=null;var n;n=e?this.kapi.animationLength():(s()-this._playTimestamp)%this.kapi.animationLength(),this.kapi.update(n),t(this.kapi,"stop",a)}},u.prototype.isPlaying=function(){return!!this._styleElement}});var o=function(t,e){"use strict";var n=e?{}:t,o=e&&e.underscore?e.underscore:n._,a=e&&e.Tweenable?e.Tweenable:n.Tweenable;return i(n,o,a),o.each(r,function(t){t(n)}),n.Kapi};if("function"==typeof define&&define.amd){var a="undefined"!=typeof _;define(["shifty","underscore"],function(t,e){var n=null!=e,r={Tweenable:t,underscore:n?e:_},i=o({},r);return!a&&n&&(this._=void 0),i})}else o(this)})(this);